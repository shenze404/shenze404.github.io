<script>
    async function login() {
        var id = document.getElementById("id").value.trim();
        var password = document.getElementById("password").value.trim();

        let response = await fetch('https://raw.githubusercontent.com/你的用户名/你的仓库/main/users.json');
        let users = await response.json();

        let user = users.find(user => user.id === id);
        
        if (!user) {
            // 账号不存在
            localStorage.setItem("statusMessage", "登录失败！此账号不存在！");
            localStorage.setItem("redirectTarget", "login.html");
            localStorage.setItem("redirectDelay", 3000);
            window.location.href = "status.html";
            return;
        }

        if (user.password !== password) {
            // 密码错误
            localStorage.setItem("statusMessage", "登录失败！密钥错误！");
            localStorage.setItem("redirectTarget", "login.html");
            localStorage.setItem("redirectDelay", 3000);
            window.location.href = "status.html";
            return;
        }

        // 登录成功
        localStorage.setItem("currentUser", JSON.stringify(user));
        localStorage.setItem("statusMessage", "登录成功！");
        localStorage.setItem("redirectTarget", "index.html");
        localStorage.setItem("redirectDelay", 2000);

        window.location.href = "status.html";
    }
</script>
